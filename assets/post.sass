---
---

/*
 * vars
 */

$line: #d0d0d0
$grey: #909090
$black: #404040
$xblack: #131313
$accent: #3c9
$bg: #fff

$margin: 1.4em
$xs-margin: 1.4em

$fira: 'fira sans', sans-serif
$source: 'source sans pro', sans-serif
$body: $source
$serif: 'merriweather', serif
$mono: 'ubuntu mono', monaco, monospace

$xs-max: 760px

$width: 660px

/*
 * fonts!
 */

@import url(http://fonts.googleapis.com/css?family=Fira+Sans:200,300,400,700)
@import url(http://fonts.googleapis.com/css?family=Lato:400,400italic,700)
@import url(http://fonts.googleapis.com/css?family=Merriweather:300italic)
@import url(http://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700)
@import url(http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400)
@import url(http://code.ionicframework.com/ionicons/1.5.2/css/ionicons.min.css)
@import 'reset'
@import 'antialias'

html.loading
  opacity: 0
  transition: none

html.loaded
  opacity: 1
  transition: all 250ms linear 1000ms

/*
 * base
 */

html, body
  margin: 0
  padding: 0

html
  background: $bg

*
  transition: all 250ms linear

body
  &
    font-family: $body
    font-size: 11pt
    line-height: 1.5
    color: $black

  @media (min-width: 1000px)
    font-size: 13pt

  @media (max-width: $xs-max)
    font-size: 10pt

/*
 * blog header
 */

.blog-header
  > div
    margin: 0 $margin
    height: 50px
    border-bottom: solid 1px rgba($line, 0.25)

  h1
    line-height: 50px
    text-transform: uppercase
    font-family: $source
    font-size: 0.8em
    text-align: center

  h1, h1 a
    color: $line
    text-decoration: none

  h1 a:hover
    color: $black

/*
 * post item
 */

.post-item
  &
    padding-top: 200px
    padding-bottom: $margin * 4

  & + &
    border-top: solid 1px #ddd

  @media (max-width: $xs-max)
    padding-top: $margin * 2
    padding-bottom: $margin * 2

/*
 * headline
 */

.post-headline
  &
    text-align: center
    padding-left: $margin
    padding-right: $margin

  h1
    font-weight: 200
    font-family: $fira
    line-height: 1.1
    font-size: 2.7em

    @media (max-width: $xs-max)
      font-size: 2.0em
      line-height: 1.2

  h1, h1 a
    color: $xblack
    text-decoration: none

  h1 a:hover
    color: $grey

  h5
    margin-top: 10px
    text-transform: uppercase
    font-family: $source
    font-weight: 400
    font-size: 0.8em
    letter-spacing: 1px
    color: $grey

/*
 * pre's
 */

%code-block
  display: block
  color: #666
  padding: 20px
  background: #fdfdfd
  border-radius: 2px
  font-family: $mono
  font-size: 0.85em
  font-style: normal
  line-height: 1.4

/*
 * inline formatting
 */

code, em, i
  color: #444
  font-size: 0.85em
  font-family: $serif
  font-style: italic
  padding: 3px 1px

/*
 * content
 */

%content-area
  &
    line-height: 1.65

  a, a:visited
    color: $grey
    text-decoration: none
    border-bottom: solid 2px rgba($black, 0.1)
    padding-bottom: 1px

  a:hover
    color: $accent
    border-bottom: solid 2px rgba($accent, 0.5)
    transition: all 0 linear

  // each block
  >
    p, ul, ol, article, blockquote, pre, h2, h3, h4, h5, .block, .pull-quote
      margin: $margin auto
      max-width: $width
      padding-left: 20px
      padding-right: 20px

      @media (max-width: $xs-max)
        max-width: none
        padding-left: 15px
        padding-right: 15px

  // inset blocks
  blockquote, li
    >
      p, ul, ol, article, blockquote, pre, h2, h3, h4, h5, .block
        padding: 0
        margin: $margin 0
        &:first-child
          margin-top: 0
    >
      h2, h3, h4
        display: block
        font-weight: bold
        font-family: $fira
        color: $xblack
        font-size: 1em
        margin: 0
        + p
          margin-top: 0

      h4
        color: $grey

  ol li
    list-style: decimal outside

  ul li
    list-style: disc outside

  ol li, ul li
    margin-left: 2em

  /* image */

  p > img
    width: 100%

  > p.large-image
    max-width: ($width * 1.35)

  /* hr */

  hr
    display: block
    width: 80px
    margin: ($margin * 2) auto
    background: $line
    height: 1px
    border: 0

  hr.-stars
    height: auto
    background: transparent
    text-align: center
    margin: ($margin * 2) auto
    width: auto
    text-align: center

    &:before
      content: '* * * *'
      font-family: $fira
      font-size: 0.8em
      white-space: nowrap
      letter-spacing: 6px

      position: relative
      top: 0.2em

  /* big heading */

  h2,
  .pull-quote
    font-family: $serif
    font-weight: 300
    line-height: 1.6
    font-style: italic
    color: $black
    max-width: 800px
    text-align: center

  .pull-quote
    $fs: 1.6em
    font-size: $fs
    margin-top: ($margin / $fs) * 2.5
    margin-bottom: ($margin / $fs) * 2.5

  h2
    $fs: 1.8em
    font-size: $fs
    margin-top: ($margin / $fs) * 3
    margin-bottom: ($margin / $fs) * 2

  /* brief text */

  p.brief
    font-size: 1.2em
    line-height: 1.55em
    color: #888

  /* small heading */

  h3
    &
      font-weight: bold
      font-family: $fira
      font-size: 1.2em
      color: $xblack
      margin-top: $margin * 1.5
    + p
      margin-top: ($margin * -1.2)

  // non coderay
  pre > code
    @extend %code-block

  > blockquote
    border-left: solid 2px $line
    padding-left: $margin
    color: $grey
    max-width: ($width - 40px)
    font-style: italic

/*
 * coderay's ceremonial block
 */

.CodeRay
  &, > .code
    margin: 0
    padding: 0

  > .code
    @extend %content-area

  > .code > pre
    @extend %code-block
    max-width: ($width - 40px)

/*
 * actual content
 */

.post-content
  @extend %content-area

/*
 * footnotes
 */

.with-footnote
  @extend %content-area
  width: $width
  margin: 0 auto

  @media (max-width: $xs-max)
    padding: 0
    margin: 0
    width: auto

  > blockquote
    padding: 0
    border: 0

    font-style: normal
    font-size: 0.75em
    line-height: 1.5

    border-top: solid 1px $line
    border-bottom: solid 1px $line
    padding: 20px 10px 0 20px

    >
      h2, h3, h4
        color: $black
        font-family: $fira

  // TODO: sucks
  @media (min-width: $xs-max)
    > blockquote
      border: 0
      border-top: solid 1px rgba($line, 0.5)
      padding: 10px 0 0 0

      margin-top: 0
      width: 170px
      float: right
      margin-right: -195px

    &.-left > blockquote
      float: left
      margin-right: 0
      margin-left: -195px
      text-align: right

/*
 * panorama
 */

.panorama-section,
.post-content>.panorama-section
  &
    background: #111
    width: 100%
    max-width: none
    @extend %content-area
    overflow: hidden
    margin-top: $margin * 2
    margin-bottom: $margin * 2
    padding-top: $margin * 2
    padding-bottom: $margin * 2

    position: relative

  &
    color: rgba(white, 0.7)

  > *
    position: relative
    z-index: 1

  > .backdrop
    position: absolute
    left: 0
    top: 0
    bottom: 0
    right: 0
    background-position: center center
    background-size: cover
    z-index: 0

  > h3
    color: white

/* syntax highlighting */

.CodeRay
  .regexp, .string, .number
    color: #4c8

  .keyword, .reserved
    color: #346
    font-weight: bold
