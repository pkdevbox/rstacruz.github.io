<?xml version="1.0" encoding="utf-8"?>
<rss version='2.0' xmlns:admin='http://webns.net/mvcb/' xmlns:content='http://purl.org/rss/1.0/modules/content/' xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:sy='http://purl.org/rss/1.0/modules/syndication/'>
<channel>
<title>Rico Sta Cruz.com</title>
<link>http://rstacruz.github.com</link>
<description></description>
<dc:language>en</dc:language>
<dc:rights>Copyright 2010</dc:rights>
<pubDate>Thu, 30 Dec 2010 11:58:22 +0800</pubDate>
<item>
<title>HAML and IE compatibility</title>
<link>http://rstacruz.github.com/2010/haml_and_ie_compatibility.html</link>
<description>
<![CDATA[<p class="brief c3">I love <span class="caps">HAML</span>, and I love the insanely-elegant <a href="http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/">Paul Irish IE conditional comments trick</a> (not hack!). But how can we use them together? For those that tried, I&#8217;m sure you know by now that trying to shoehorn the whole snippet as a bunch of <span class="caps">HAML</span> comments is just gross, and impossible.</p>
<section class="flush">
<p><img src="http://rstacruz.github.comimages/cc_ie_html.png" alt="" /></p>
<div class="caption c1">
<p><strong>Figure 1</strong>.<br />
IE conditional comments allows you to target IE versions easily without any hacks. More info in <a href="http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/">Paul Irish&#8217;s post</a><br />
<div></p>
</section>
<section class="pt2 nb main">
<div class="c c1">
<h3>Implementing conditional comments: the helpers way</h3>
<p>The solution isn&#8217;t that hard to accomplish! <span class="caps">HAML</span> lets you have helper functions that take in blocks which you can receive in your helper functions as <span class="caps">HTML</span>. I suppose we just put two and two together, and:</p>
</div>
<pre class="c2 fr prettyprint lang-rb">
module ConditionalHtmlHelper
  # Implements the Paul Irish IE conditional comments HTML tag--in HAML.
  # http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/
  def cc_html(options={}, &amp;blk)
    attrs = options.map { |(k, v)| " #{h k}='#{h v}'" }.join('')
    [ "&lt;!--[if lt IE 7 ]&gt; &lt;html#{attrs} class='ie6'&gt; &lt;![endif]--&gt;",
      "&lt;!--[if IE 7 ]&gt;    &lt;html#{attrs} class='ie7'&gt; &lt;![endif]--&gt;",
      "&lt;!--[if IE 8 ]&gt;    &lt;html#{attrs} class='ie8'&gt; &lt;![endif]--&gt;",
      "&lt;!--[if IE 9 ]&gt;    &lt;html#{attrs} class='ie9'&gt; &lt;![endif]--&gt;",
      "&lt;!--[if (gt IE 9)|!(IE)]&gt;&lt;!--&gt; &lt;html#{attrs}&gt; &lt;!--&lt;![endif]--&gt;",
      capture_haml(&amp;blk).strip,
      "&lt;/html&gt;"
    ].join("\n")
  end

  def h(str); Rack::Utils.escape_html(str); end
end

# Assuming Main is your Sinatra app
Main.helpers ConditionalHtmlHelper
</pre>
<div class="c c1">
<h3>Usage in <span class="caps">HAML</span></h3>
<p>Now in your <span class="caps">HAML</span> layouts, instead of using <code>%html</code>, use the new helper like so:</p>
</div>
<pre class="c2 fr prettyprint lang-rb">
!!! 5
!= cc_html(:lang =&gt; 'en') do
  %head
    %meta(charset='UTF-8')
    %title Hello!

  %body
    ...
</pre>
</section>
<section class="alert">
<div class="c1">
<h3>Oh, and one more thing&#8230;</h3>
<p>This will make it dirt easy to implement IE-specific stuff in <span class="caps">SCSS</span>. Thanks to <a href="http://twitter.com/marcopalinar">@marcopalinar</a> for the tip.</p>
</div>
<pre class="c1 prettyprint lang-css">
/* Fix the double margin bug */
.posts {
    margin-left: 10px;
    .ie6 &amp; { margin-left: 5px; }
}
</pre>

<pre class="c1 prettyprint lang-css">
/* Upgrade notice */
.upgrade-your-browser {
  &amp; { display: none; }
  .ie6 &amp; { display: block; }
}
</pre>
</section>
<h3 class="c c2">That&#8217;s it!</h3>
<p class="c c2">Aura now has all it&#8217;s views peppered with the conditional comments trick. Still no IE compatibility, though&#8230; that&#8217;ll come later. As usual, you can check the demo site at aurademo.heroku.com.</p>]]>
</description>
<pubDate>Sun, 10 Oct 2010 00:00:00 +0000</pubDate>
</item>
</channel>
</rss>
